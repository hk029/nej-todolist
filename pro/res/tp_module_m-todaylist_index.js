I$("4ce527ec37601491627716b9bfa9ff23",function(e,t,n,r,i,a,o,c,s,f,u,_){var d;s._$$ModuleLayoutSystem=e._$klass();d=s._$$ModuleLayoutSystem._$extend(a._$$Module);d.__doBuild=function(){this.__body=t._$html2node(n._$getTextTemplate("module-id-today"));console.log("today build");r._$add("task-template");this.__curEdit=-1;this.__data=c._get("tasklist")};d.__changeList=function(e,t){var n=this.__data.tasklist[e].taskname;var r=this.__data.tasklist[e].done;if(t){this.__data.tasklist[e].taskname=void 0===t.taskname?n:t.taskname;this.__data.tasklist[e].done=void 0===t.done?r:t.done;if(void 0!==t.done)if(1==r)this.__data.tasklist.unshift(this.__data.tasklist.splice(e,1)[0]);else this.__data.tasklist.push(this.__data.tasklist.splice(e,1)[0])}else this.__data.tasklist.splice(e,1);this.__events.onrefresh(this.__data);c._set("tasklist",this.__data)};d.__onShow=function(e){this.__super(e);var t=this;this.__list=o("#task-content");if(this.__data)this.__events.onrefresh(this.__data);else{this.__data={tasklist:[{taskname:"单击标题编辑",done:0},{taskname:"清空标题，删除事项",done:0},{taskname:"点击 + ，新增任务",done:0},{taskname:"<-单击图标更改完成状态",done:1}]};c._set("tasklist",this.__data);this.__events.onrefresh(this.__data)}o("body")._$on("click",function(e){var n=o(e.target);var r=n._$parent()._$attr("no");var i=t.__curEdit;if(i>=0){t.__curEdit=-1;var a=o("input")[i].value;if(a.length)t.__changeList(i,{taskname:a});else t.__changeList(i)}if("IMG"===n[0].tagName&&"checkico"===n[0].className){var c=t.__data.tasklist[r].done;t.__changeList(r,{done:!c})}else if("INPUT"===n[0].tagName&&"text"===n[0].className){t.__curEdit=r;n[0].selectionStart=0;n[0].selectionEnd=n._$val().length}else;})};d.__onRefresh=function(e){this.__super(e);if(e.tasklist){var t=r._$get("task-template",e);o(this.__list)._$html(t)}};d.__onHide=function(){this.__super()};d.__onMessage=function(e){switch(e.data.type){case"add":this.__data.tasklist.unshift({taskname:"新建事项（单击编辑）",done:0});this.__events.onrefresh(this.__data)}};i._$regist("layout-todaylist",s._$$ModuleLayoutSystem)},"a83e6f6615d975f5a8381c7c5c6bec91","5c7cd3f0e9d746e277df4064a5cb3396","3bd305aaf742c1eba49a237458f65614","65a40ac6aeefd404b1a59be130b9ea39","7439c9c83c68eefc0b89c521229b1943","8d792cf24135bbb3ddbc22ecb1f0a209","98f173d99953e99e8803ac3724f23fa6","f0b5165d7bfb3e7018ba3314755ff0fb");