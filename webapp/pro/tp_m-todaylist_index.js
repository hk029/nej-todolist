I$("7d2caeff42266253a500531b748303f8",function(e,t,n,r,i,a,o,c,s,f,u,_){var d;s._$$ModuleLayoutSystem=e._$klass();d=s._$$ModuleLayoutSystem._$extend(a._$$Module);d.__doBuild=function(){this.__body=t._$html2node(n._$getTextTemplate("module-id-today"));console.log("today build");r._$add("task-template");this.__curEdit=-1;this.__data=c._get("tasklist")};d.__changeList=function(e,t){var n=this.__data.tasklist[e].taskname;var r=this.__data.tasklist[e].done;if(t){this.__data.tasklist[e].taskname=void 0===t.taskname?n:t.taskname;this.__data.tasklist[e].done=void 0===t.done?r:t.done;if(void 0!==t.done&&1==r)this.__data.tasklist.unshift(this.__data.tasklist.splice(e,1)[0]);else this.__data.tasklist.push(this.__data.tasklist.splice(e,1)[0])}else this.__data.tasklist.splice(e,1);this.__events.onrefresh(this.__data);c._set("tasklist",this.__data)};d.__onShow=function(e){this.__super(e);var t=this;this.__list=o("#task-content");if(this.__data)this.__events.onrefresh(this.__data);else{this.__data={tasklist:[{taskname:"单击标题编辑",done:0},{taskname:"清空标题，删除事项",done:0},{taskname:"点击 + ，新增任务",done:0},{taskname:"<-单击图标更改完成状态",done:1}]};c._set("tasklist",this.__data);this.__events.onrefresh(this.__data)}o("body")._$on("click",function(e){var n=o(e.target);var r=n._$parent()._$attr("no");var i=t.__curEdit;if(i>=0){t.__curEdit=-1;var a=o("input")[i].value;if(a.length)t.__changeList(i,{taskname:a});else t.__changeList(i)}if("IMG"===n[0].tagName&&"checkico"===n[0].className){var c=t.__data.tasklist[r].done;t.__changeList(r,{done:!c})}else if("INPUT"===n[0].tagName&&"text"===n[0].className){t.__curEdit=r;n[0].selectionStart=0;n[0].selectionEnd=n._$val().length}else;})};d.__onRefresh=function(e){this.__super(e);if(e.tasklist){var t=r._$get("task-template",e);o(this.__list)._$html(t)}};d.__onHide=function(){this.__super()};d.__onMessage=function(e){switch(e.data.type){case"add":this.__data.tasklist.unshift({taskname:"新建事项（单击编辑）",done:0});this.__events.onrefresh(this.__data)}};i._$regist("layout-todaylist",s._$$ModuleLayoutSystem)},"7d45f691904093dd3d0d2a39eb337c1c","43a92a1cb30f0322e2bca627e0f6b635","73f169cf794774f1be9fb45582c96a38","01daafc45eed32c99fa66fa6bd62337a","16c6ee60c6b3ca72fb25ef265bef87a8","6e94510af15d7b4fbe9c5bb0aa80cb90","4223dd31d8676f25379e594a969892ec","30cd45b11df0e4585383b8cbf819c507");